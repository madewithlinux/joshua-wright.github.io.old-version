<!DOCTYPE HTML>
<html>
<head>
    <title>Josh Wright on GitHub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="../css/main.css">
    <link rel="stylesheet" type="text/css" media="screen" href="rpn_calculator.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript">
$(document).ready(function(){

    /*factoring*/
    $("#number_to_factor").bind("enterKey", function(){
        var num = $("#number_to_factor")[0].value;
        $("#factor_output").empty();
        for (var i=1; i<=num; i++) {
            if (num % i === 0) {
                // console.log(i);
                $("#factor_output").append("<tr><td>" + i + "</td><td>" + (num / i) + "</tr></td>");
            }
        }

    })
    $('#number_to_factor').keyup(function(e){
        if(e.keyCode == 13)
        {
            $(this).trigger("enterKey");
        }
    });
    $("#factor_button").click(function(){
        $('#number_to_factor').trigger("enterKey");
    });
    $("#factor_clear").click(function(){
        $("#factor_output").empty();
    });


    /*primes*/
    $("#max_prime").bind("enterKey", function(){
        var time_start = new Date().getTime();
        var max_prime = $("#max_prime")[0].value;
        $("#prime_output").empty();
        var i = 2;
        primes = [];
        /*fill the initial array*/
        for (var j=0; j<max_prime; j++) {
            primes.push(true);
        }
        /*cross out the non-primes*/
        while (i*i < max_prime) {
            for (var j = i*i; j<max_prime; j+= i) {
                primes[j] = false;
            }
            i++;
        }
        var time_taken = new Date().getTime() - time_start;
        /*output the remaining primes*/
        $("#prime_output").append("Time: " + time_taken + "ms<br>");
        for (var k=2; k<primes.length; k++) {
            if (primes[k]) {
                $("#prime_output").append(k + " ");
            }
        }
    })
    $('#max_prime').keyup(function(e){
        if(e.keyCode == 13)
        {
            $(this).trigger("enterKey");
        }
    });
    $("#prime_button").click(function(){
        $('#max_prime').trigger("enterKey");
    });
    $("#prime_clear").click(function(){
        $("#prime_output").empty();
    });


    /*RPN Calculator*/
    var stack = [0];
    // stack = [0];

    function update_stack() {
        $("#stack_output").empty();
        for (var i=0; i<stack.length; i++) {
            $("#stack_output").append(stack[i] + "<br>");
        }
    }
    update_stack();

    $("#button_0").click(function(){ stack.push(Number(stack.pop().toString() + "0")); update_stack(); });
    $("#button_1").click(function(){ stack.push(Number(stack.pop().toString() + "1")); update_stack(); });
    $("#button_2").click(function(){ stack.push(Number(stack.pop().toString() + "2")); update_stack(); });
    $("#button_3").click(function(){ stack.push(Number(stack.pop().toString() + "3")); update_stack(); });
    $("#button_4").click(function(){ stack.push(Number(stack.pop().toString() + "4")); update_stack(); });
    $("#button_5").click(function(){ stack.push(Number(stack.pop().toString() + "5")); update_stack(); });
    $("#button_6").click(function(){ stack.push(Number(stack.pop().toString() + "6")); update_stack(); });
    $("#button_7").click(function(){ stack.push(Number(stack.pop().toString() + "7")); update_stack(); });
    $("#button_8").click(function(){ stack.push(Number(stack.pop().toString() + "8")); update_stack(); });
    $("#button_9").click(function(){ stack.push(Number(stack.pop().toString() + "9")); update_stack(); });
    
    $("#button_decimal").click(function(){ stack.push(stack.pop().toString() + "."); update_stack(); });

    $("#button_plus"    ).click(function(){stack.push(stack.pop() + stack.pop()); update_stack(); });
    $("#button_multiply").click(function(){stack.push(stack.pop() * stack.pop()); update_stack(); });
    $("#button_minus"   ).click(function(){
        var rhs = stack.pop();
        var lhs = stack.pop();
        stack.push(lhs - rhs);
        update_stack();
    });
    $("#button_divide"  ).click(function(){
        var rhs = stack.pop();
        var lhs = stack.pop();
        stack.push(lhs / rhs);
        update_stack();
    });

    $("#button_clear").click(function(){ stack = []; update_stack(); });
    $("#button_clear_entry").click(function(){ stack[stack.length-1] = 0; update_stack(); });
    $("#button_enter").click(function(){ stack.push(0); update_stack(); });
    $("#button_backspace").click(function(){
        stack.push(Number(stack.pop().toString().slice(0,-1)));
        update_stack();
    });

})
    </script>
</head>
<body>
    <header>
        <h1>JavaScript Examples</h1>
    </header>
    <section class="nav">
        <ul>
            <li><a href="../index.html" title="Home">Home</a></li>
            <li><a href="https://github.com/madewithlinux/" title="GitHub">GitHub</a></li>
            <li><a href="../Josh_Wright_Resume.pdf" title="Resume">R&eacute;sum&eacute;</a></li>
            <li><a href="https://www.linkedin.com/in/madewithlinux/" title="LinkedIn Profile">LinkedIn</a></li>
        </ul>
    </section>
    <section class="main">
        <p>
            Use your browser's web console to inspect the code in this page
        </p>
        
        <h2>Factors:</h2>
        <p>
            Number to factor:
            <input type="number" name="number_to_factor" id="number_to_factor">
            <input type="button" name="factor_button" id="factor_button" value="go">
            <input type="button" name="factor_clear" id="factor_clear" value="clear">
            <br>
            <!-- Factors:
            <br> -->
            <table id="factor_output"></table>
        </p>
        <!-- <p>Factors:<br></p> -->

        <h2>Find Primes using the Sieve of Eratosthenes:</h2>
        <p>
            Find primes between 0 and:
            <input type="number" name="max_prime" id="max_prime">
            <input type="button" name="prime_button" id="prime_button" value="go">
            <input type="button" name="prime_clear" id="prime_clear" value="clear">
            <br>
            <div id="prime_output"></div>
        </p>

        <h2>RPN Calculator:</h2>
        <table id="numpad">
        <tr>
            <td><input type="button" name="" id="button_7"           value="7"></td>
            <td><input type="button" name="" id="button_8"           value="8"></td>
            <td><input type="button" name="" id="button_9"           value="9"></td>
            <td><input type="button" name="" id="button_clear"       value="C"></td>
        </tr>
        <tr>
            <td><input type="button" name="" id="button_4"           value="4"></td>
            <td><input type="button" name="" id="button_5"           value="5"></td>
            <td><input type="button" name="" id="button_6"           value="6"></td>
            <td><input type="button" name="" id="button_clear_entry" value="CE"></td>
        </tr>
        <tr>
            <td><input type="button" name="" id="button_1"           value="1"></td>
            <td><input type="button" name="" id="button_2"           value="2"></td>
            <td><input type="button" name="" id="button_3"           value="3"></td>
            <td><input type="button" name="" id="button_backspace"   value="<-"></td>
        </tr>
        <tr>
            <td><input type="button" name="" id="button_0"           value="0"></td>
            <td><input type="button" name="" id="button_decimal"     value="."></td>
            <td><input type="button" name="" id="button_enter"       value="->"></td>
            <td></td>
        </tr>
        <tr>
            <td><input type="button" name="" id="button_plus"        value="+"></td>
            <td><input type="button" name="" id="button_minus"       value="-"></td>
            <td><input type="button" name="" id="button_multiply"    value="x"></td>
            <td><input type="button" name="" id="button_divide"      value="/"></td>
        </tr>
        </table>
        <p>Stack: <div id="stack_output"></div></p>


    </section>
    <footer>
        &copy; Josh Wright <br>
        <a href="mailto:madewithlinux.josh@gmail.com" title="madewithlinux.josh@gmail.com">madewithlinux.josh@gmail.com</a>
    </footer>
</body>
</html>